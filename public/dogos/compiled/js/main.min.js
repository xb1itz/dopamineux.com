/*! muzli 2017-06-12 */

"use strict";var muzli=angular.module("muzli",["ui.router","ui.bootstrap","ngWebSocket"]);muzli.value("$anchorScroll",angular.noop),muzli.config(["$httpProvider","$locationProvider","settings",function(a,b,c){a.interceptors.push(["$q","$injector","$rootScope",function(a,b,d){return{request:function(b){return 0===b.url.indexOf("api")&&(b.url=c.apiUrl+b.url),-1!==b.url.indexOf("views")&&(b.url=b.url+"?v="+c.version),b||a.when(b)},response:function(b){a.defer();return(b.headers()["content-type"]||"").indexOf("json")>-1&&b.data.hasOwnProperty("success")?b.data.success?(b.data.data&&(b.data=b.data.data),b):(console.error(b.config.url,b.data),a.reject(b)):b},responseError:function(c){var d=b.get("$state");switch(c.status){case 401:d.go("login"),console.info("User not authorised");break;case 404:d.go("^"),console.info("Resource not found");break;case 410:window.location="/";break;default:console.error(c)}return a.reject(c)}}}]),a.defaults.withCredentials=!0,b.html5Mode(!0),console.info("Current version: "+c.version)}]),muzli.run(["$rootScope","$q","$state","$stateParams","$timeout","$websocket","trackingService","settings",function(a,b,c,d,e,f,g,h){var i;a.$state=c,a.$stateParams=d,a.$on("$stateChangeSuccess",function(b,d,e,f,g){a.$state=c,a.$stateParams=c.params,console.log("State changed to: "+d.name)}),i=f(h.wsUrl),i.onOpen(function(){console.log("WS connection established")}),i.onMessage(function(b){var c=JSON.parse(b.data);"newPost"===c.type&&a.$broadcast("newPost",c)}),i.onError(function(a){console.error(a)}),i.onClose(function(a){console.log("WS connection closed")}),a.setPageTitle=function(b){a.pageTitle=b,e(function(){g.ga.trackPageView(c.current.name)})}}]),angular.element().ready(function(){angular.bootstrap(document,["muzli"])}),angular.module("muzli").config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/"),a.state("index",{url:"/",controller:"indexController",templateUrl:"views/posts.html"}).state("feed",{url:"/{feed}",controller:"indexController",templateUrl:"views/posts.html"})}]),angular.module("muzli").constant("settings",{apiUrl:"http://52.28.154.213:1080/",wsUrl:"ws://52.28.154.213:1080/",rootPath:"/dogos/",version:"1.0.1",tracker:{GA_TRACKING_CODE:"",INTERCOM_TOKEN:""}});
//# sourceMappingURL=main.min.js.map